<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css"/>
    <link rel="stylesheet" href="assets/coloris.min.css"/>
    <title>Palette Designer</title>
</head>
<body>
    <main class="color-palette">
        <button id="clr-btn">Open Coloris</button>
        <span id="clr-value"></span>
        <input type="hidden" class="clr-input" data-coloris/>

        <!-- <div class="color" style="background-color:rebeccapurple">
            <div class="context-menu">
                <button class="btn" aria-label="Add to Left">Add to Left</button>
                <button class="btn" aria-label="Edit">Edit</button>
                <button class="btn" aria-label="Add to Right">Add to Right</button>
            </div>
            <div class="color-hex">#663399</div>
        </div>    -->
        
    </main> 
</body>
<script src="assets/coloris.js"></script>
<!-- <script type="module" src="script.js"></script> -->
<script type="text/javascript">

    // Coloris configuration

    Coloris({
        el: '.clr-input',
        theme: 'pill',
        themeMode: 'dark',
        format: 'hex',
        formatToggle: true,
        closeButton: false,
        clearButton: false,
        swatches: [
            // '#067bc2',
            // '#84bcda',
            // '#80e377',
            // '#ecc30b',
            // '#f37748',
            // '#d56062'
        ]
    })

    // Testing using buttons to open coloris picker

    const colorBtn = document.getElementById("clr-btn");
    const colorInput = document.querySelector(".clr-input");
    const colorValue = document.getElementById("clr-value");
    
    // Using this pattern, we can make any element
    // a trigger for opening the Coloris picker,
    // not just input elements.
    colorBtn.addEventListener("click", e => {
        colorInput.dispatchEvent(new Event("click", { bubbles: true }));
        
        movePicker();
    });

    // "coloris:pick" event is fired every time
    // a new color is picked
    document.addEventListener("coloris:pick", e => {
        console.log("new color: ", e.detail.color);
    })    
    
    let mouseX, mouseY;

    // Keep track of mouse position at all times
    document.addEventListener("mousemove", e => {
        mouseX = e.clientX;
        mouseY = e.clientY;
        console.log(mouseX, mouseY)
    })

    // Move picker to where the mouse is
    function movePicker() {        
        const colorisPicker = document.querySelector(".clr-picker");
        // console.log(`is clr-picker shown: ${colorisPicker.style.left !== ""}`);
        // console.log("MOVE: "+colorisPicker.style.left+colorisPicker.style.top)
        colorisPicker.style.top = `${mouseY}px`;
        colorisPicker.style.left = `${mouseX}px`;
    }

</script>
</html>